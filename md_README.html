<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sentence Encoder/Decoder (SentEncDec): SentEncDec</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sentence Encoder/Decoder (SentEncDec)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SentEncDec </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>SentEncDec is a specialized module focused on encoding and decoding sentences into vector representations. This module stands out for its two main innovations: a unique residual-recurrent architecture and the match drop technique.</p>
<p>The residual-recurrent architecture allows the network to be efficiently trained using first-order optimization algorithms, such as ADAM. This approach enhances the learning process, making it more effective and streamlined, especially in handling the complexities of natural language. This architecture can also be used in other tasks that use neural networks to process sequential data.</p>
<p>In addition, the match drop technique is a key feature of SentEncDec. It smartly allocates computational resources to the most crucial parts of the output. This targeted approach ensures that the network's capacity is utilized where it's needed the most, leading to more efficient processing and better performance.</p>
<p>These advancements make SentEncDec a valuable tool for various applications in natural language processing, from semantic analysis to more complex tasks like language translation. Whether for academic research or practical industry applications, SentEncDec offers a robust, innovative solution for sentence encoding and decoding.</p>
<p>This project is associated with the paper titled "Return of the RNN: Residual Recurrent Networks for Invertible Sentence Embeddings" which provides in-depth explanations of the concepts, methodologies, and findings that underpin this software. The paper can be accessed <a href="https://arxiv.org/abs/2303.13570v2">here</a>.</p>
<p>For detailed documentation, see <a href="https://jjwilkerson.github.io/SentEncDec/">SentEncDec Documentation</a>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Compatibility</h1>
<p>This software has been developed and tested on Linux. While it may work on other UNIX-like systems, its compatibility with non-Linux operating systems (like Windows or macOS) has not been verified. Users are welcome to try running it on other systems, but should be aware that they may encounter issues or unexpected behavior.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Dependencies</h1>
<p>To build and use SentEncDec, you'll need the following dependencies:</p>
<ul>
<li><b>C++ Compiler:</b> GCC (versions 6.x - 12.2) or an equivalent compiler.</li>
<li><b>CUDA Toolkit:</b> Version 12.1 - <a href="https://developer.nvidia.com/cuda-downloads">Download CUDA Toolkit</a>.</li>
<li><b>Additional Libraries:</b><ul>
<li>NetLib (another module next to this one).</li>
<li>UTF8-CPP (version 2.3.4) <a href="https://github.com/nemtrif/utfcpp/tree/v2.3.4">Download UTF8-CPP</a>.</li>
<li>JsonCpp (version 1.8.4) <a href="https://github.com/open-source-parsers/jsoncpp/tree/1.8.4">Download JsonCpp</a>.</li>
<li>Boost (version 1.72.0) <a href="https://www.boost.org/users/history/">Download Boost</a>.<ul>
<li>Build the regex, system, and filesystem modules.</li>
</ul>
</li>
<li>CUDA Samples Common <a href="https://github.com/NVIDIA/cuda-samples">Download CUDA Samples</a>.</li>
</ul>
</li>
</ul>
<p>Ensure you have these libraries installed and accessible in your development environment.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Configuring Dependencies in Eclipse</h1>
<p>If building with Eclipse, it is necessary to configure the dependencies. This involves setting up include paths, library paths, and linking the libraries. Here's how to do it:</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Include Paths</h2>
<ul>
<li>Add the include paths for NetLib, UTF8-CPP, and CUDA Samples Common</li>
<li>Example paths:<ul>
<li>${workspace_loc:/NetLib}</li>
<li>/usr/local/include/utf8</li>
<li>/usr/local/cuda-samples/Common</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Library Paths</h2>
<ul>
<li>Specify the library paths where Eclipse can find the compiled libraries.</li>
<li>Example paths:<ul>
<li>${workspace_loc:/NetLib/Release}</li>
<li>/usr/local/lib (location of JsonCpp library)</li>
<li>/usr/lib/x86_64-linux-gnu (location of Boost libraries</li>
<li>/usr/local/cuda-12.1/lib64 (location of CUDA libraries</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Libraries</h2>
<ul>
<li>Link the libraries in your Eclipse project settings.</li>
<li>Example libraries to link:<ul>
<li>NetLib</li>
<li>boost_regex</li>
<li>boost_system</li>
<li>boost_filesystem</li>
<li>jsoncpp</li>
<li>cublas</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Building SentEncDec</h1>
<p>While SentEncDec was developed using Eclipse with the Nsight plugin, it's not a strict requirement. You can build it as long as you have the CUDA toolkit installed.</p>
<p>Here are the general steps to build SentEncDec:</p>
<ul>
<li><b>Clone the Repository:</b></li>
</ul>
<div class="fragment"><div class="line">git clone https://github.com/jjwilkerson/SentEncDec.git</div>
<div class="line">cd SentEncDec</div>
</div><!-- fragment --><ul>
<li><b>Building:</b> If the above include paths, library paths, and libraries are configured then SentEncDec can be easily built (as an executable) in Eclipse with the Nsight plugin. It is necessary to set the PROGRAM_VERSION macro to a value from 1 to 5 to determine which executable program is built.</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">PROGRAM_VERSION   </th><th class="markdownTableHeadLeft">Program    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyLeft">Single training run    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyLeft">Random search for hyperparameters    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyLeft">Extend a training run (such as after random search)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyLeft">Encoder (inference)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">5   </td><td class="markdownTableBodyLeft">Decoder (inference)   </td></tr>
</table>
<p>It is also necessary to set the NETWORK_VERSION macro to a value of 1 or 2 to build a residual-recurrent or GRU network, respectively.</p>
<p>Alternatively, you can build it from the command line using Make by executing one of the following commands. It may be necessary to update paths to nvcc and dependencies in Makefile first. You may also need to change the CUDA hardware versions after "arch=" to match your specific GPU.</p>
<p>Single training run, residual-recurrent:</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">make rr</div>
</div><!-- fragment --><p>Single training run, GRU:</p>
<div class="fragment"><div class="line">make gru</div>
</div><!-- fragment --><p>Random search for hyperparameters, residual-recurrent:</p>
<div class="fragment"><div class="line">make search-rr</div>
</div><!-- fragment --><p>Random search for hyperparameters, GRU:</p>
<div class="fragment"><div class="line">make search-gru</div>
</div><!-- fragment --><p>Extend a training run (such as after random search), residual-recurrent:</p>
<div class="fragment"><div class="line">make extend-rr</div>
</div><!-- fragment --><p>Extend a training run, GRU:</p>
<div class="fragment"><div class="line">make extend-gru</div>
</div><!-- fragment --><p>Encoder (inference):</p>
<div class="fragment"><div class="line">make encoder</div>
</div><!-- fragment --><p>Decoder (inference):</p>
<div class="fragment"><div class="line">make decoder</div>
</div><!-- fragment --><p>Before building a different target, run the following:</p>
<div class="fragment"><div class="line">make clean</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Usage</h1>
<p>Before running the program, SED_DATASETS_DIR must be defined as an environment variable, with its value being the location of the SentEncDec datasets in your file system. The datasets can be downloaded from the following link: <a href="https://drive.google.com/drive/folders/1A-t6bfeG3_HzQt8Cvsbijk-RPqPccx7g?usp=sharing">Download datasets</a>. Decompress the tar file before using.</p>
<p>To run as a single training run, place the executable in a new folder along with a config file named config.json. You can use the config.json file in the SentEncDec source folder as a starting point. The program state and parameters will be saved periodically, so that training can be restarted if interrupted.</p>
<p>To run as a random search, a config file will not be necessary. To extend a training run, place the executable in the folder corresponding to the training run and run it from there.</p>
<p>To run inference (encoder or decoder), place the executable in a folder with a config file and saved weights (parameters) and run it from there.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Contributing</h1>
<p>Contributions to SentEncDec are welcome. Please ensure to follow the coding standards and submit a pull request for review.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
License</h1>
<p>SentEncDec is licensed under the MIT License. See the LICENSE file for more details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
